---
kind: RoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: core-operator-binding
  namespace: {{ .Values.NAMESPACE }}
  labels:
    deployer.cleanup/allow: "true"
    app.kubernetes.io/part-of: 'Cloud-Core'
    app.kubernetes.io/managed-by: 'saasDeployer'
    deployment.qubership.org/sessionId: '{{ .Values.DEPLOYMENT_SESSION_ID }}'
subjects:
  - kind: ServiceAccount
    name: {{ .Values.SERVICE_NAME }}
    namespace:  {{ .Values.NAMESPACE }}
roleRef:
  kind: Role
  name: core-operator-role
  apiGroup: rbac.authorization.k8s.io
---
kind: RoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: "{{ .Values.SERVICE_NAME }}-cr-sa"
  namespace: {{ .Values.NAMESPACE }}
  labels:
    deployer.cleanup/allow: "true"
    app.kubernetes.io/part-of: 'Cloud-Core'
    app.kubernetes.io/managed-by: 'saasDeployer'
subjects:
  - kind: ServiceAccount
    name: {{ .Values.SERVICE_NAME }}
    namespace:  {{ .Values.NAMESPACE }}
roleRef:
  kind: Role
  name: core-operator-role-events
  apiGroup: rbac.authorization.k8s.io
